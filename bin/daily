#! /app/.heroku/node/bin/node

require('dotenv').config();
const exec = require('child_process').exec

function os_func() {
        this.execCommand = function(cmd, callback) {
            exec(cmd, (error, stdout, stderr) => {
                if (error) {
                console.error(`exec error: ${error}`);
                return;
                 }
        callback(stdout);
        });
    }
}
var os = new os_func();

function daily() {
    os.execCommand(`ebook-convert "The Wall Street Journal.recipe" ./pdfs/wsj-today.epub  --output-profile tablet --username ${process.env.wsj_username} --password ${process.env.wsj_password}`, function (returnvalue) {
    console.log(returnvalue);
    process.exit();
    });
}
daily();

